# 飞控板维修工单系统使用说明

## 系统概述

飞控板维修工单系统是一个基于Web的维修工单管理系统，支持工单创建、跟踪、管理和报告功能。系统采用PHP后端 + HTML/CSS/JavaScript前端架构。

## 目录结构

```
FlightControlBoardMaintenanceWorkOrderSystem/
├── api/                    # 后端API接口
│   ├── config-manager.php  # 配置管理
│   ├── database-init.php   # 数据库初始化
│   ├── login.php          # 用户登录
│   ├── fcbmwo.php         # 飞控板工单管理
│   ├── drarwo.php         # 维修记录管理
│   ├── workorder.php      # 通用工单管理
│   └── ...
├── config/                 # 配置文件目录
│   ├── app-config.ini     # 应用配置
│   └── mysql.ini          # 数据库配置
├── css/                   # 样式文件
├── js/                    # JavaScript文件
├── images/                # 图片资源
├── database-init.html     # 数据库初始化页面
├── login.html            # 登录页面
├── index.html            # 主页面
└── 使用说明.md           # 本文档
```

## 配置方法

### 方法一：数据库配置

1. **编辑数据库配置文件**
   ```ini
   # config/mysql.ini
   [database]
   host = 127.0.0.1          # 数据库服务器地址
   user = root               # 数据库用户名
   password = "123456"       # 数据库密码
   database = fcbmwos        # 数据库名称
   port = 12345             # 数据库端口
   charset = utf8           # 字符集
   
   [connection]
   timeout = 30             # 连接超时时间（秒）
   persistent = false       # 是否启用持久连接
   max_connections = 100    # 最大连接数
   ```

2. **配置说明**
   - `host`: 数据库服务器IP地址或域名
   - `user`: 数据库用户名
   - `password`: 数据库密码（建议使用引号包围）
   - `database`: 数据库名称
   - `port`: 数据库端口（MySQL默认3306）
   - `charset`: 字符编码，建议使用utf8或utf8mb4

### 方法二：应用配置

1. **编辑应用配置文件**
   ```ini
   # config/app-config.ini
   [database]
   ; 数据库是否已初始化 (true/false)
   initialized = false
   ```

2. **配置说明**
   - `initialized`: 标记数据库是否已完成初始化
   - 系统首次运行时会自动设置为false
   - 数据库初始化完成后会自动设置为true

### 方法三：环境配置

1. **服务器环境要求**
   - PHP 7.4 或更高版本
   - MySQL 5.7 或更高版本
   - Web服务器（Apache/Nginx/PHP内置服务器）

2. **PHP扩展要求**
   - PDO
   - PDO_MySQL
   - JSON
   - mbstring

## 使用方法

### 方法一：首次部署

1. **下载系统文件**
   ```bash
   # 将系统文件放置到Web服务器目录
   cp -r FlightControlBoardMaintenanceWorkOrderSystem /var/www/html/
   ```

2. **配置数据库连接**
   ```bash
   # 编辑数据库配置
   vim config/mysql.ini
   ```

3. **启动Web服务器**
   ```bash
   # 使用PHP内置服务器（开发环境）
   php -S localhost:8000
   
   # 或配置Apache/Nginx（生产环境）
   ```

4. **初始化数据库**
   - 访问：`http://localhost:8000/database-init.html`
   - 点击"初始化数据库"按钮
   - 等待初始化完成

### 方法二：用户登录

1. **访问登录页面**
   ```
   http://localhost:8000/login.html
   ```

2. **输入登录信息**
   - 用户名：admin
   - 密码：123456
   - 点击"登录"按钮

3. **登录成功后跳转到主页面**

### 方法三：工单管理

1. **创建工单**
   - 在主页面点击"新建工单"
   - 填写工单信息
   - 选择工单类型和优先级
   - 点击"保存"

2. **查看工单列表**
   - 主页面显示所有工单
   - 支持按日期、状态、用户筛选
   - 点击工单可查看详情

3. **更新工单状态**
   - 打开工单详情
   - 修改工单内容
   - 更新状态（进行中/已完成）
   - 保存更改

### 方法四：维修记录管理

1. **飞控板维修记录（FCBMWO）**
   ```javascript
   // API调用示例
   fetch('/api/fcbmwo.php/list')
     .then(response => response.json())
     .then(data => console.log(data));
   ```

2. **维修记录（DRARWO）**
   ```javascript
   // 创建维修记录
   fetch('/api/drarwo.php', {
     method: 'POST',
     headers: {'Content-Type': 'application/json'},
     body: JSON.stringify({
       user: 'engineer1',
       description: '维修描述'
     })
   });
   ```

### 方法五：API接口使用

1. **工单管理API**
   ```bash
   # 获取工单列表
   GET /api/workorder.php/list
   
   # 创建工单
   POST /api/workorder.php
   Content-Type: application/json
   {
     "user": "engineer1",
     "description": "工单描述"
   }
   
   # 更新工单
   PUT /api/workorder.php/{id}
   
   # 删除工单
   DELETE /api/workorder.php/{id}
   ```

2. **配置管理API**
   ```bash
   # 获取配置
   GET /api/config-manager.php?key=database.initialized
   
   # 更新配置
   POST /api/config-manager.php
   Content-Type: application/json
   {
     "key": "database.initialized",
     "value": "true"
   }
   ```

### 方法六：数据库管理

1. **手动初始化数据库**
   ```bash
   # 导入SQL文件
   mysql -u root -p fcbmwos < fcbmwos_mysql8.sql
   ```

2. **备份数据库**
   ```bash
   # 备份数据库
   mysqldump -u root -p fcbmwos > backup.sql
   ```

3. **恢复数据库**
   ```bash
   # 恢复数据库
   mysql -u root -p fcbmwos < backup.sql
   ```

### 方法七：系统维护

1. **日志查看**
   - 检查Web服务器错误日志
   - 检查PHP错误日志
   - 检查数据库连接日志

2. **性能优化**
   - 启用PHP OPcache
   - 优化数据库索引
   - 使用CDN加速静态资源

3. **安全配置**
   - 定期更新密码
   - 限制数据库访问IP
   - 启用HTTPS
   - 定期备份数据

## 故障排除

### 常见问题

1. **数据库连接失败**
   - 检查mysql.ini配置
   - 确认数据库服务运行状态
   - 验证用户名密码正确性

2. **页面无法访问**
   - 检查Web服务器状态
   - 确认端口未被占用
   - 检查防火墙设置

3. **API返回错误**
   - 检查PHP错误日志
   - 验证请求格式正确性
   - 确认数据库表结构完整

### 联系支持

如遇到其他问题，请联系系统管理员或查看详细的错误日志信息。

---

**版本**: 1.0.0  
**最后更新**: 2025年10月  
**维护者**: 系统管理员